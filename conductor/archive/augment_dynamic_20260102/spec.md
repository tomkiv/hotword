# Specification: Dynamic Data Augmentation\n\n## Overview\nThis track enhances the training pipeline with dynamic, on-the-fly data augmentation. Instead of relying on static synthetic samples, the system will apply random transformations to training samples during each epoch. This increases dataset diversity exponentially and significantly improves the model's robustness to real-world noise and microphone variations.\n\n## Functional Requirements\n- **Probability-based Trigger:** Augmentations are applied to hotword samples based on a configurable probability (`augment_prob`).\n- **Dynamic Noise Mixing:** \n  - Randomly select a noise source from either provided `background/` files or synthetic noise generators.\n  - Mix noise with the signal at a random ratio between 0.0 and `max_noise_ratio`.\n- **Time Shifting:** randomly shift the hotword audio forward or backward by a few milliseconds (up to `max_shift_ms`) to handle onset variations.\n- **Volume Scaling:** Randomly scale the amplitude of the signal (gain) within a range (e.g., 0.8x to 1.2x).\n- **Configuration:** Expose all augmentation parameters via CLI flags and `config.yaml`.\n\n## Implementation Details\n- **Package:** Update `pkg/audio` with `Shift` and `Scale` functions.\n- **Trainer:** Integrate the `Augmentor` logic into the `Trainer.Train` loop. Ensure that the original dataset remains untouched (augment copies).\n- **Randomness:** Use a seeded random generator for reproducible results if a seed is provided in the config.\n\n## Acceptance Criteria\n- Training a model with dynamic augmentation enabled results in a model that is more resistant to false triggers during the `listen` command in a noisy room.\n- Unit tests verify that `Shift`, `Scale`, and `Mix` functions correctly transform audio buffers.\n- The `Trainer` correctly applies augmentations only to the specified percentage of samples.
